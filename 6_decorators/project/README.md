Проект:

Создайте класс Cache, который будет использоваться как декоратор для кэширования результатов функций. Экземпляр класса Cache должен иметь метод invalidate(), который позволяет инвалидировать кэш для определенной функции. Класс Cache должен поддерживать кэширование результатов обычных функций, методов класса и асинхронных функций.

Декораторы в Python могут быть реализованы как функции или как классы. Вот как это работает на примере проекта:

Класс Cache определяет метод __call__. Этот метод вызывается, когда экземпляр класса вызывается как функция. В данном случае, он принимает функцию func, которую нужно декорировать.

Метод __call__ возвращает новую функцию wrapper, которая оборачивает func. Эта функция wrapper будет вызываться вместо исходной функции func, когда func вызывается.

Внутри wrapper, вы можете добавить дополнительную логику перед и после вызова func. В вашем случае, вы хотите добавить кэширование, поэтому вы будете проверять, есть ли результат в кэше, прежде чем вызывать func, и сохранять результат в кэше после вызова func.

Метод invalidate позволяет вам очистить кэш для конкретной функции.

Инвалидировать кэш означает удалить данные из кэша, чтобы они не могли быть использованы для последующих запросов. Это обычно делается, когда данные, которые были сохранены в кэше, больше не актуальны или верны. В контексте данного кода, метод invalidate удаляет все кэшированные результаты для указанной функции.

Заметьте, что класс Cache при декорировании не должен делать из синхронной функции ассинхронную и наоборот. Для того, чтобы выяснить является ли переданная функция корутиной можно воспользоваться asyncio.iscoroutinefunction.
